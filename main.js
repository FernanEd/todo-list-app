(()=>{"use strict";const e='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">\n  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>\n  <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>\n</svg>',t='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">\n  <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>\n</svg>',n='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-check" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M10.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>\n  <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>\n</svg>',a='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-folder" viewBox="0 0 16 16">\n  <path d="M.54 3.87L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"/>\n</svg>',r='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">\n<path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n</svg>',i=(()=>{const e=function(){let e=JSON.parse(localStorage.getItem("user_data"));if(!e)return null;let t=[];for(let n of e){let e=[];for(let t of n.tasks)e.push(new l(t.desc,t.priority,t.duedate,t.done));n=new d(n.name);for(let t of e)n.addTask(t);t.push(n)}return t}()||[],t=()=>{localStorage.setItem("user_data",JSON.stringify(n().map((e=>e.getObjLiteral()))))},n=()=>[...e];return{updateData:t,addProject:n=>{e.push(n),t()},removeProject:n=>{e.splice(indexOf(n),1),t()},removeProjectAtIndex:n=>{e.splice(n,1),t()},getProjects:n}})();function d(e){let t=e,n=[];return{getObjLiteral:()=>({name:t,tasks:n.map((e=>e.getObjLiteral()))}),getName:()=>t,addTask:e=>{e.setIndex(n.length),n.push(e)},removeTask:e=>{n.splice(n.indexOf(e),1)},removeTaskAtIndex:e=>{n.splice(e,1)},getTasks:()=>n,editProject:e=>{t=e}}}function l(e,t,n,a=!1){let r=-1,i=e,d=t,l=n,s=a;return{getObjLiteral:()=>({index:r,desc:i,priority:d,duedate:l,done:s}),isDone:()=>s,setDone:e=>{s=e},editTask:(e,t,n)=>{i=e,d=t,l=n},setIndex:e=>{r=e}}}function s({title:e,fields:t,button:n}){let a=document.createElement("form");a.classList.add("modal-form");let i=document.createElement("div");i.classList.add("form-header");let d=document.createElement("div");d.classList.add("form-close","btn","btn-secondary"),d.innerHTML=r;let l=document.createElement("h2");l.classList.add("form-title"),l.innerText=e,i.append(d),i.append(l),a.append(i);for(let e of t){let t=document.createElement("div");t.classList.add("form-field");let n,r=document.createElement("label");r.innerText=e.name,"textarea"!==e.type?(n=document.createElement("input"),n.setAttribute("type",e.type)):n=document.createElement("textarea"),n.setAttribute("name",e.name),n.setAttribute("id",e.id),e.required&&n.setAttribute("required",""),"number"===e.type&&(n.setAttribute("min",e.minrange),n.setAttribute("max",e.maxrange)),t.append(r),t.append(n),a.append(t)}let s=document.createElement("button");return s.classList.add("form-submit","btn","btn-primary","btn-long"),s.innerText=n,a.append(s),a}function c(e,t){let n=new s(e),a=document.createElement("div");a.classList.add("modal-bg"),a.append(n);let r=document.querySelector("#content");r.append(a);let i=n.querySelector(".form-close");i.addEventListener("click",(e=>{n.reset(),r.removeChild(a)}),{once:!0}),n.addEventListener("submit",(e=>{e.preventDefault(),t(n),i.click()}),{once:!0})}const o={title:"New Project",fields:[{id:"name",name:"Project name",type:"text",required:!0}],button:"Create project"},u={title:"Edit Project",fields:[{id:"name",name:"Project name",type:"text",required:!0}],button:"Update project"},m={title:"Are you sure you want to delete this project?",fields:[],button:"Remove project"},p={title:"Add new Task",fields:[{id:"desc",name:"Description",type:"textarea",required:!0},{id:"date",name:"Due date",type:"date",required:!0},{id:"priority",name:"Priority (0 low - 3 max)",type:"number",required:!0,minrange:0,maxrange:3}],button:"Submit"},b={title:"Edit Task",fields:[{id:"desc",name:"Description",type:"textarea",required:!0},{id:"date",name:"Due date",type:"date",required:!0},{id:"priority",name:"Priority (0 low - 3 max)",type:"number",required:!0,minrange:0,maxrange:3}],button:"Update"},v={title:"Delete this task?",fields:[],button:"Remove"},h=(()=>{const r=document.querySelector("#project-wrapper"),l=document.querySelector("#list-wrapper");let s;const o=document.querySelector("#project-mini-title");let p=0;function y(){return s||new d(" No project ")}o.innerText=y().getName();const g=()=>{r.innerHTML="";let n=i.getProjects();0===n.length&&(r.innerText="You have no projects."),n.forEach((d=>{let l=function({name:n,tasks:r}){let i=document.createElement("div");i.classList.add("project-item");let d=document.createElement("div");d.classList.add("project-item-content");let l=document.createElement("div");l.classList.add("project-item-header");let s=document.createElement("div");s.classList.add("project-item-icon"),s.innerHTML=a;let c=document.createElement("p");c.classList.add("project-item-title"),c.innerText=n,l.append(s),l.append(c);let o=document.createElement("small");o.classList.add("project-item-desc"),o.innerText=r.length>1?`(${r.length}) tasks on project.`:r.length>0?"(1) task on project.":"No tasks on project.",d.append(l),d.append(o);let u=document.createElement("div");u.classList.add("project-item-controls");let m=document.createElement("button");m.classList.add("btn-edit","btn","btn-light","btn-circle"),m.innerHTML=t;let p=document.createElement("button");return p.classList.add("btn-delete","btn","btn-light","btn-circle"),p.innerHTML=e,u.append(m),u.append(p),i.append(d),i.append(u),d.addEventListener("click",(e=>{x(i)})),m.addEventListener("click",(e=>{E(i)})),p.addEventListener("click",(e=>{w(i)})),i}(d.getObjLiteral());n.indexOf(d)===i.getProjects().indexOf(y())&&l.classList.add("project-item-selected"),r.appendChild(l)}))},L=e=>{f();let t=Array.from(r.childNodes)[e];s=t?i.getProjects()[e]:void 0,o.innerText=y().getName(),f()},f=()=>{g(),j(y().getTasks())},j=a=>{l.innerHTML="";let r=a;switch(p){default:case 0:r=a.filter((e=>!e.isDone()));break;case 1:break;case 2:r=[...a].sort(((e,t)=>e.getObjLiteral().priority<t.getObjLiteral().priority?1:-1));break;case 3:r=a.filter((e=>e.isDone()))}0===r.length&&(l.innerText="No tasks to show."),r.forEach((a=>{let r=function({index:a,desc:r,priority:i,duedate:d,done:l}){let s=document.createElement("div");s.classList.add("list-item"),s.setAttribute("data-index",a),s.setAttribute("data-done",l),l&&s.classList.add("list-item-done");let c=document.createElement("div");c.classList.add("list-item-header");let o=document.createElement("div");o.classList.add("list-item-info");let u=document.createElement("p");u.classList.add("list-item-duedate","text-secondary"),u.innerText=d;let m=document.createElement("p");m.classList.add("list-item-priority","text-primary"),m.innerText=3==i?"Urgent":2==i?"Important":1==i?"Should Do":"Optional",o.append(u),o.append(m);let p=document.createElement("div");p.classList.add("list-item-controls");let b=document.createElement("button");b.classList.add("btn-done","btn","btn-primary","btn-circle"),b.innerHTML=n;let v=document.createElement("button");v.classList.add("btn-edit","btn","btn-secondary","btn-circle"),v.innerHTML=t;let h=document.createElement("button");h.classList.add("btn-delete","btn","btn-secondary","btn-circle"),h.innerHTML=e,p.append(b),p.append(v),p.append(h),c.append(o),c.append(p);let y=document.createElement("div");y.classList.add("list-item-body");let g=document.createElement("p");return g.classList.add("list-item-desc"),g.innerText=r,y.append(g),s.append(c),s.append(y),b.addEventListener("click",(e=>{k(s)}),{once:!0}),v.addEventListener("click",(e=>{T(s)})),h.addEventListener("click",(e=>{q(s)})),s}(a.getObjLiteral());l.appendChild(r)}))},x=e=>{let t=[...r.children].indexOf(e);L(t)},E=e=>{c(u,(t=>{let n=[...r.children].indexOf(e);i.getProjects()[n].editProject(t.querySelector("#name").value),i.updateData(),h.selectProject(n)}))},w=e=>{c(m,(t=>{let n=[...r.children].indexOf(e);i.removeProjectAtIndex(n),i.updateData(),h.selectProject(-1)}))},k=e=>{let t=e.getAttribute("data-index"),n=h.getCurrentProject().getTasks()[t];n.isDone()?n.setDone(!1):n.setDone(!0),i.updateData(),h.updateDisplay()},T=e=>{c(b,(t=>{let n=e.getAttribute("data-index");h.getCurrentProject().getTasks()[n].editTask(t.querySelector("#desc").value,t.querySelector("#priority").value,t.querySelector("#date").value),i.updateData(),h.updateDisplay()}))},q=e=>{c(v,(t=>{let n=e.getAttribute("data-index");h.getCurrentProject().removeTaskAtIndex(n),i.updateData(),h.updateDisplay()}))};return{getCurrentProject:y,displayProjects:g,selectProject:L,updateDisplay:f,setFilter:e=>{p=e}}})();document.querySelector("#project-add-btn").addEventListener("click",(e=>{c(o,(e=>{let t=new d(e.querySelector("#name").value);i.addProject(t);let n=i.getProjects().indexOf(t);i.updateData(),h.selectProject(n)}))})),document.querySelector("#list-add-btn").addEventListener("click",(e=>{c(p,(e=>{let t=new l(e.querySelector("#desc").value,e.querySelector("#priority").value,e.querySelector("#date").value);h.getCurrentProject().addTask(t),i.updateData(),h.updateDisplay()}))})),(()=>{const e=document.querySelectorAll(".link-nav-item");e.forEach((t=>{t.addEventListener("click",(n=>{h.setFilter([...e].indexOf(t)),h.updateDisplay(),e.forEach((e=>e.classList.remove("list-nav-item-selected"))),function(e){e.classList.add("list-nav-item-selected")}(t)}))}))})(),h.updateDisplay(),(()=>{let e=document.querySelector("#project-mini-menu-btn"),t=document.querySelector("#project-return-btn "),n=document.querySelector("#project-mini"),a=document.querySelector("#project-main"),r=document.querySelector("#list-main");e.addEventListener("click",(e=>{n.style.display="none",r.style.display="none",a.style.display="initial"})),t.addEventListener("click",(e=>{n.style.display="initial",r.style.display="initial",a.style.display="none"}))})()})();